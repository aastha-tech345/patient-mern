"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9198],{19198:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var n=a(65043),s=a(63043),l=a(44751),i=a(41339),o=a(52455),c=a(66921),r=a(58390),d=a(60446),m=a.n(d),u=a(88062),h=(a(52316),a(73216)),p=a(70579);const x=()=>{let e="http://18.204.141.1:8090",t=localStorage.getItem("patientRecord"),a=JSON.parse(t);const[d,x]=(0,n.useState)(""),[v,j]=(0,n.useState)([]),[g,f]=(0,n.useState)("");(0,n.useEffect)((()=>{(async()=>{try{var t,a;const n=await(0,s.J4)("".concat(e,"/api/patient/patientByDoctor"));console.log("dasRes",n),x(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.count),j(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.data)}catch(n){console.error("Error fetching data:",n)}})()}),[]);const[b,y]=(0,n.useState)([]),[N,D]=(0,n.useState)([]),[w,A]=(0,n.useState)([]),S=m()(),[k,C]=(0,n.useState)(S),[_,F]=(0,n.useState)(S),[I,P]=(0,n.useState)(!1),Y=async t=>{try{var a,n;if(_.isBefore(k))return void alert("End date cannot be earlier than start date");const t=new Date(k),l=new Date(_);console.log(t,l);const i=await(0,s.J4)("".concat(e,"/api/patient/nextAppointmentDate?startDate=").concat(t,"&endDate=").concat(l));y(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.data),D(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.count)}catch(l){console.log(l)}};(0,n.useEffect)((()=>{C(S),F(S)}),[]),(0,n.useEffect)((()=>{Y()}),[I]);(0,n.useEffect)((()=>{(()=>{try{const e=new Date(k);console.log("today",e);const t=null===e||void 0===e?void 0:e.getFullYear(),a=null===e||void 0===e?void 0:e.getMonth(),n=null===e||void 0===e?void 0:e.getDate(),s=v.filter((e=>{const s=new Date(null===e||void 0===e?void 0:e.nextApointmentDate),l=null===s||void 0===s?void 0:s.getFullYear(),i=null===s||void 0===s?void 0:s.getMonth(),o=null===s||void 0===s?void 0:s.getDate();return t===l&&a===i&&n===o}));A(s)}catch(e){console.log(e)}})()}),[k]),console.log("dateValue",k);const[E,R]=(0,n.useState)("checkbox"),M=(0,h.Zp)(),T=[{title:"CR no",dataIndex:"crn"},{title:"Phone no",dataIndex:"phone",render:e=>(0,p.jsx)("a",{children:e})},{title:"Name",dataIndex:"name",render:e=>(0,p.jsx)("a",{children:e})},{title:"Age",dataIndex:"age"},{title:"Sex",dataIndex:"sex"},{title:"Appointment",dataIndex:"nextApointmentDate",render:e=>new Date(e).toLocaleString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(/\//g,"/")},{title:"Action",render:e=>(0,p.jsx)("button",{className:"btn btn-primary",onClick:t=>M("/patientPage",{state:e}),children:"View"})}],U={onChange:(e,t)=>{console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t)},getCheckboxProps:e=>({disabled:"Disabled User"===e.name,name:e.name})};return console.log("appointmentDataList",b),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mb-5 mt-2",style:{textAlign:"center"},children:(0,p.jsxs)("h2",{children:["Welcome, ",null===a||void 0===a?void 0:a.name," "]})}),(0,p.jsx)(i.A,{numberOfPatient:d,appointmentDataList:w,filteredAppointmentNumber:N}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-sm-2",children:(0,p.jsx)("div",{style:{fontFamily:"sans-serif",marginTop:"1rem"},children:(0,p.jsx)("h4",{children:"Appointments"})})}),(0,p.jsx)("div",{className:"col-sm-10 ",children:(0,p.jsxs)("div",{className:"row justify-content-center",children:[(0,p.jsxs)("div",{className:"col-sm-4",children:[" ",(0,p.jsx)("div",{className:"",children:(0,p.jsx)(r.$,{dateAdapter:c.R,children:(0,p.jsx)(o.j,{components:["DateTimePicker"],children:(0,p.jsx)(u.K,{label:"From",value:k,onChange:e=>{C(e)},inputFormat:"YYYY-MM-DD",ampm:!1,ampmInClock:!1,views:["year","month","day"]})})})})]}),(0,p.jsxs)("div",{className:"col-sm-4",children:[" ",(0,p.jsx)("div",{children:(0,p.jsx)(r.$,{dateAdapter:c.R,children:(0,p.jsx)(o.j,{components:["DateTimePicker"],children:(0,p.jsx)(u.K,{label:"To",value:_,onChange:e=>{F(e)},inputFormat:"YYYY-MM-DD",ampm:!1,ampmInClock:!1,views:["year","month","day"]})})})})]}),(0,p.jsxs)("div",{className:"col-sm-2 d-flex  mb-3",children:[(0,p.jsx)("button",{className:"btn btn-primary mt-3 me-2",onClick:Y,children:"Search"}),(0,p.jsx)("button",{className:"btn btn-primary mt-3 ",onClick:()=>{C(S),F(S),P(!I)},children:"Reset"})]})]})})]}),(0,p.jsx)("div",{className:"mt-2 table-responsive",children:(0,p.jsx)(l.A,{rowSelection:{type:E,...U},columns:T,dataSource:b})})]})}},41339:(e,t,a)=>{a.d(t,{A:()=>o});a(65043);var n=a(93946),s=a(90504),l=(a(6145),a(73216)),i=a(70579);const o=e=>{let{numberOfPatient:t,appointmentDataList:a,filteredAppointmentNumber:o}=e;const c=(0,l.Zp)();return(0,i.jsxs)(n.sK,{children:[(0,i.jsx)(n.UF,{sm:6,lg:3,children:(0,i.jsx)(n.Uz,{className:"mb-4",color:"primary",value:(0,i.jsxs)(i.Fragment,{children:["Patient ",(0,i.jsxs)("div",{className:"fs-6 fw-normal",children:["Number of Patients : ",t]})]}),onClick:()=>c("/patientPage"),style:{cursor:"pointer"},chart:(0,i.jsx)(s.WE,{className:"mt-3 mx-3",style:{height:"70px"}})})}),(0,i.jsx)(n.UF,{sm:6,lg:3,children:(0,i.jsx)(n.Uz,{className:"mb-4",color:"primary",value:(0,i.jsxs)(i.Fragment,{children:["Appointments"," ",(0,i.jsxs)("div",{className:"fs-6 fw-normal",children:["Today Appointment : ",o]})]}),chart:(0,i.jsx)(s.WE,{className:"mt-3 mx-3",style:{height:"70px"}})})})]})}}}]);
//# sourceMappingURL=9198.0d73d31e.chunk.js.map