"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9198],{19198:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(65043),s=a(63043),i=a(44751),l=a(41339),o=a(14182),c=a(66921),r=a(58390),d=a(60446),m=a.n(d),u=a(43210),p=(a(52316),a(73216)),h=a(59135),x=a(27642),v=a(70579);const g=()=>{let e="http://18.204.141.1:8090",t=localStorage.getItem("patientRecord"),a=JSON.parse(t);const[d,g]=n.useState(1),[j,f]=(0,n.useState)(1),[y,b]=(0,n.useState)(""),[N,D]=(0,n.useState)([]),[w,A]=(0,n.useState)("");(0,n.useEffect)((()=>{(async()=>{try{var t,a;const n=await(0,s.J4)("".concat(e,"/api/patient/patientByDoctor"));console.log("dasRes",n),b(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.count),D(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.data)}catch(n){console.error("Error fetching data:",n)}})()}),[]);const[S,C]=(0,n.useState)([]),[k,_]=(0,n.useState)([]),[F,I]=(0,n.useState)([]),P=m()(),[Y,E]=(0,n.useState)(P),[R,M]=(0,n.useState)(P),[T,U]=(0,n.useState)(!1),K=async t=>{try{var a,n,i;if(R.isBefore(Y))return void alert("End date cannot be earlier than start date");const t=new Date(Y),l=new Date(R);console.log(t,l);const o=await(0,s.J4)("".concat(e,"/api/patient/nextAppointmentDate?startDate=").concat(t,"&endDate=").concat(l,"&page=").concat(d));C(null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.data),_(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.count),f(null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.pageCount)}catch(l){console.log(l)}};(0,n.useEffect)((()=>{E(P),M(P)}),[]),(0,n.useEffect)((()=>{K()}),[T,d]);(0,n.useEffect)((()=>{(()=>{try{const e=new Date(Y);console.log("today",e);const t=null===e||void 0===e?void 0:e.getFullYear(),a=null===e||void 0===e?void 0:e.getMonth(),n=null===e||void 0===e?void 0:e.getDate(),s=N.filter((e=>{const s=new Date(null===e||void 0===e?void 0:e.nextApointmentDate),i=null===s||void 0===s?void 0:s.getFullYear(),l=null===s||void 0===s?void 0:s.getMonth(),o=null===s||void 0===s?void 0:s.getDate();return t===i&&a===l&&n===o}));I(s)}catch(e){console.log(e)}})()}),[Y]),console.log("dateValue",Y);const[L,J]=(0,n.useState)("checkbox"),O=(0,p.Zp)(),W=[{title:"CR no",dataIndex:"crn"},{title:"Phone no",dataIndex:"phone",render:e=>(0,v.jsx)("a",{children:e})},{title:"Name",dataIndex:"name",render:e=>(0,v.jsx)("a",{children:e})},{title:"Age",dataIndex:"age"},{title:"Sex",dataIndex:"sex"},{title:"Appointment",dataIndex:"nextApointmentDate",render:e=>new Date(e).toLocaleString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(/\//g,"/")},{title:"Action",render:e=>(0,v.jsx)("button",{className:"btn btn-primary",onClick:t=>O("/patientPage",{state:e}),children:"View"})}],z={onChange:(e,t)=>{console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t)},getCheckboxProps:e=>({disabled:"Disabled User"===e.name,name:e.name})};return console.log("appointmentDataList",S),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"mb-5 mt-2",style:{textAlign:"center"},children:(0,v.jsxs)("h2",{children:["Welcome, ",null===a||void 0===a?void 0:a.name," "]})}),(0,v.jsx)(l.A,{numberOfPatient:y,appointmentDataList:F,filteredAppointmentNumber:k}),(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-sm-2",children:(0,v.jsx)("div",{style:{fontFamily:"sans-serif",marginTop:"1rem"},children:(0,v.jsx)("h4",{children:"Appointments"})})}),(0,v.jsx)("div",{className:"col-sm-10 ",children:(0,v.jsxs)("div",{className:"row justify-content-center",children:[(0,v.jsxs)("div",{className:"col-sm-4",children:[" ",(0,v.jsx)("div",{className:"",children:(0,v.jsx)(r.$,{dateAdapter:c.R,children:(0,v.jsx)(o.j,{components:["DateTimePicker"],children:(0,v.jsx)(u.K,{label:"From",value:Y,onChange:e=>{E(e)},inputFormat:"YYYY-MM-DD",ampm:!1,ampmInClock:!1,views:["year","month","day"]})})})})]}),(0,v.jsxs)("div",{className:"col-sm-4",children:[" ",(0,v.jsx)("div",{children:(0,v.jsx)(r.$,{dateAdapter:c.R,children:(0,v.jsx)(o.j,{components:["DateTimePicker"],children:(0,v.jsx)(u.K,{label:"To",value:R,onChange:e=>{M(e)},inputFormat:"YYYY-MM-DD",ampm:!1,ampmInClock:!1,views:["year","month","day"]})})})})]}),(0,v.jsxs)("div",{className:"col-sm-2 d-flex  mb-3",children:[(0,v.jsx)("button",{className:"btn btn-primary mt-3 me-2",onClick:K,children:"Search"}),(0,v.jsx)("button",{className:"btn btn-primary mt-3 ",onClick:()=>{E(P),M(P),U(!T)},children:"Reset"})]})]})})]}),(0,v.jsx)("div",{className:"mt-2 table-responsive",children:(0,v.jsx)(i.A,{rowSelection:{type:L,...z},columns:W,dataSource:S,pagination:!1})}),(0,v.jsx)("div",{className:"d-flex justify-content-end mt-2",children:(0,v.jsx)(x.A,{spacing:2,children:(0,v.jsx)(h.A,{count:j,page:d,onChange:(e,t)=>{g(t)}})})})]})}},41339:(e,t,a)=>{a.d(t,{A:()=>o});a(65043);var n=a(93946),s=a(90504),i=(a(6145),a(73216)),l=a(70579);const o=e=>{let{numberOfPatient:t,appointmentDataList:a,filteredAppointmentNumber:o}=e;const c=(0,i.Zp)();return(0,l.jsxs)(n.sK,{children:[(0,l.jsx)(n.UF,{sm:6,lg:3,children:(0,l.jsx)(n.Uz,{className:"mb-4",color:"primary",value:(0,l.jsxs)(l.Fragment,{children:["Patient ",(0,l.jsxs)("div",{className:"fs-6 fw-normal",children:["Number of Patients : ",t]})]}),onClick:()=>c("/patientPage"),style:{cursor:"pointer"},chart:(0,l.jsx)(s.WE,{className:"mt-3 mx-3",style:{height:"70px"}})})}),(0,l.jsx)(n.UF,{sm:6,lg:3,children:(0,l.jsx)(n.Uz,{className:"mb-4",color:"primary",value:(0,l.jsxs)(l.Fragment,{children:["Appointments"," ",(0,l.jsxs)("div",{className:"fs-6 fw-normal",children:["Today Appointment : ",o]})]}),chart:(0,l.jsx)(s.WE,{className:"mt-3 mx-3",style:{height:"70px"}})})})]})}}}]);
//# sourceMappingURL=9198.6794e851.chunk.js.map