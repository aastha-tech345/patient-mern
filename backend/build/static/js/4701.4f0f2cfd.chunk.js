"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4701],{84701:(e,t,s)=>{s.r(t),s.d(t,{default:()=>le});var a=s(65043),n=s(63043),l=(s(62377),s(77154)),r=s(70579);const i=e=>{let{diagnosis:t,desc:s}=e;const[n,i]=(0,a.useState)([]),[o,c]=(0,a.useState)({});(0,a.useEffect)((()=>{t&&Array.isArray(t)&&i([...t].reverse())}),[t]);const d=e=>!!/^\d{13}_/.test(e);return(0,r.jsx)("div",{style:{maxHeight:"300px",overflowY:"scroll",overflowX:"hidden",marginTop:"20px"},children:null===n||void 0===n?void 0:n.map(((e,t)=>{var s;const a=null===e||void 0===e?void 0:e.date,n=new Date(a).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(/\//g,"/");return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{style:{margin:"1rem auto 1rem 1rem",overflow:"auto !important"},children:[(0,r.jsxs)("h5",{children:["Diagnose Date : ",n]}),(0,r.jsxs)("table",{className:"table",style:{width:"90%",border:"1px solid",fontFamily:"ui-rounded",borderRadius:"10px"},children:[(0,r.jsxs)("colgroup",{children:[(0,r.jsx)("col",{style:{width:"20%"}}),(0,r.jsx)("col",{style:{width:"20%"}}),(0,r.jsx)("col",{style:{width:"20%"}}),(0,r.jsx)("col",{style:{width:"20%"}}),(0,r.jsx)("col",{style:{width:"20%"}})]}),(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",style:{background:"#FBF295"},children:"Problems"}),(0,r.jsx)("th",{scope:"col",style:{background:"#FBF295"},children:"Test"}),(0,r.jsx)("th",{scope:"col",style:{background:"#FBF295"},children:"Test value"}),(0,r.jsx)("th",{scope:"col",style:{background:"#FBF295"},children:"Scale"}),(0,r.jsx)("th",{scope:"col",style:{background:"#FBF295"},children:"Scale value"})]})}),null===e||void 0===e||null===(s=e.diagnosData)||void 0===s?void 0:s.map(((e,t)=>{let{problem:s,scale:a,test:n,testInput:i,value:m}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("tbody",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{fontWeight:"bolder"},children:s}),(0,r.jsx)("td",{style:{fontWeight:"bolder"},children:""===n?"-":n}),(0,r.jsx)("td",{style:{fontWeight:"bolder"},children:""===i?"-":d(i)?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{className:"btn btn-light",onClick:()=>(async(e,t)=>{c((e=>({...e,[t]:!0})));try{const t=await l.A.get("".concat("http://18.204.141.1:8090","/api/user/getPatientReport/").concat(e),{responseType:"blob"}),s=new Blob([t.data],{type:t.headers["content-type"]}),a=URL.createObjectURL(s);window.open(a)}catch(s){console.error("Error fetching image:",s)}finally{c((e=>({...e,[t]:!1})))}})(i,t),disabled:o[t],children:o[t]?"Please Wait...":"Show Report"})}):i}),(0,r.jsx)("td",{style:{fontWeight:"bolder"},children:""===a?"-":a}),(0,r.jsx)("td",{style:{fontWeight:"bolder"},children:""===m?"-":m})]})},t)})}))]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{style:{margin:"1rem auto 1rem 1rem"},children:(0,r.jsxs)("div",{className:"row",style:{marginTop:"1rem"},children:[(0,r.jsx)("div",{className:"col-md-2 d-flex align-items-center",children:(0,r.jsx)("h5",{children:"Notes:"})}),(0,r.jsx)("div",{className:"col-md-10 d-flex align-items-center",children:(0,r.jsx)("div",{className:"card",style:{width:"87%",padding:"1rem 2rem"},children:(0,r.jsx)("p",{style:{margin:"0"},children:""===e.desc?"-":e.desc})})})]})})})]}),(0,r.jsx)("hr",{})]})},t)})}))})};var o=s(14182),c=s(66921),d=s(58390),m=s(98572),h=s(91036),u=(s(92342),s(84086));const p=e=>{var t;let{_id:s,getSearchByPatient:l,setIsAddNewDiagnosis:i,setIsDetailed:p}=e,x="http://18.204.141.1:8090",v=localStorage.getItem("patientRecord"),j=JSON.parse(v);const[g,f]=a.useState(null),[y,b]=(0,a.useState)({}),[N,w]=(0,a.useState)(""),[S,C]=(0,a.useState)({diagnosis:[],desc:""}),[A,k]=(0,a.useState)([]);let[D,P]=(0,a.useState)(!1);const[R,I]=(0,a.useState)([]),[T,E]=(0,a.useState)([]),[_,F]=(0,a.useState)([]);(0,a.useEffect)((()=>{B()}),[]);const B=async()=>{try{var e,t;const s=await(0,n.J4)("".concat(x,"/api/problem/").concat(null===j||void 0===j||null===(e=j.department_id)||void 0===e?void 0:e._id)),a=null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.data[0];if(a){const e=a.problemName.filter((e=>"problem"===e.type)).map((e=>e.name)),t=a.problemName.filter((e=>"scale"===e.type)).map((e=>e.name)),s=a.problemName.filter((e=>"test"===e.type)).map((e=>{let{name:t,inputType:s}=e;return{name:t,inputType:s}}));E(s),F(t),I(e)}}catch(s){console.error("Error fetching problems:",s)}};(0,a.useEffect)((()=>{y.desc&&C((e=>({...e,desc:y.desc})))}),[y]),(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,n.J4)("".concat(x,"/api/patient/").concat(s));b(e.data.data)}catch(e){console.log(e)}})()}),[]);let[M,L]=(0,a.useState)(!1);const[W,H]=(0,a.useState)([{problem:"",test:"",testInput:"",scale:"",value:""}]),J=(e,t)=>{const{name:s,value:a}=t.target,n=[...W];n[e][s]=a,H(n)},O=()=>{H([...W,{problem:"",test:"",testInput:"",scale:"",value:""}])},z=e=>{const t=[...W];t.splice(e,1),H(t)};return(0,a.useEffect)((()=>{W.length>1?L(!0):L(!1)}),[z,O,J]),(0,r.jsxs)(r.Fragment,{children:[D&&(0,r.jsx)(u.A,{loading:D}),(0,r.jsxs)("div",{style:{margin:"1rem auto 1rem 1rem"},children:[(0,r.jsx)("div",{style:{margin:"1rem auto 1rem 0"},children:(0,r.jsxs)("h4",{children:["Diagnosis: (",null===j||void 0===j||null===(t=j.department_id)||void 0===t?void 0:t.departmentName,")"]})}),(0,r.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),1===W.length&&""===W[0].problem)return h.oR.warning("Please select at least one Chief complaint");for(const s of W){if(""!==(null===s||void 0===s?void 0:s.test)&&""===(null===s||void 0===s?void 0:s.testInput))return void h.oR.warning("Please give input for selected test");if(""!==(null===s||void 0===s?void 0:s.scale)&&""===(null===s||void 0===s?void 0:s.value))return void h.oR.warning("Please give input for selected scale");console.log("data",s)}P(!0);try{await Promise.all(W.map((async(e,t)=>{if("string"!==typeof e.testInput){const s=e.testInput,a=new FormData;a.append("file",s);const l=await(0,n.De)("".concat(x,"/api/user/uploadPatientReport"),a);l&&(W[t].testInput=null===l||void 0===l?void 0:l.fileName)}}))),P(!1)}catch(t){P(!1),console.error("Error submitting data:",t)}try{const e={...S,diagnosis:[{diagnosData:W,date:Date(),desc:N}],nextApointmentDate:g};await(0,n.E8)("".concat(x,"/api/patient/update/").concat(s),e)&&(k([]),w(""),h.oR.success("Patient Updated Successfully",{autoClose:1e3}),setTimeout((()=>{i(!1),p(!0),H([{problem:"",test:"",testInput:"",scale:"",value:""}])}),2e3),l())}catch(t){console.log(t)}},children:[(0,r.jsxs)("form",{className:"mb-2",children:[null===W||void 0===W?void 0:W.map(((e,t)=>(0,r.jsxs)("div",{className:"row mt-1 mb-2",children:[(0,r.jsx)("div",{className:"col-md-2",children:(0,r.jsx)("label",{children:(0,r.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"problem",value:e.problem,onChange:e=>J(t,e),children:[(0,r.jsx)("option",{value:"",children:"Chief complaint"}),null===R||void 0===R?void 0:R.map(((e,t)=>(0,r.jsx)("option",{value:e,children:e},t)))]})})}),(0,r.jsx)("div",{className:"col-md-2",children:(0,r.jsx)("label",{children:(0,r.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"test",value:e.test,onChange:e=>J(t,e),children:[(0,r.jsx)("option",{value:"",children:"Select Test"}),null===T||void 0===T?void 0:T.map(((e,t)=>(0,r.jsx)("option",{value:e.name,children:e.name},t)))]})})}),""===(null===e||void 0===e?void 0:e.test)?"":(0,r.jsx)("div",{className:"col-md-2",children:null===T||void 0===T?void 0:T.map(((s,a)=>{if(s.name===e.test){if("text"===(null===s||void 0===s?void 0:s.inputType))return(0,r.jsx)("label",{children:(0,r.jsx)("input",{className:"form-control",style:{width:"10rem"},placeholder:"Enter test Value",type:"text",name:"testInput",value:e.testInput,onChange:e=>J(t,e)})},a);if("file"===(null===s||void 0===s?void 0:s.inputType))return(0,r.jsx)("label",{children:(0,r.jsx)("input",{className:"form-control",style:{width:"10rem"},type:"file",name:"testInput",onChange:e=>((e,t)=>{const{name:s,files:a}=t.target,n=[...W];n[e][s]=a[0],H(n),console.log("Guarv",W)})(t,e)})},a)}return null}))}),(0,r.jsx)("div",{className:"col-md-2",children:(0,r.jsx)("label",{children:(0,r.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"scale",value:e.scale,onChange:e=>J(t,e),children:[(0,r.jsx)("option",{value:"",children:"Select Scale"}),null===_||void 0===_?void 0:_.map(((e,t)=>(0,r.jsx)("option",{value:e,children:e},t)))]})})}),(0,r.jsx)("div",{className:"col-md-2",children:(0,r.jsx)("label",{children:(0,r.jsx)("input",{className:"form-control ",style:{width:"10rem",appearance:"auto"},placeholder:"Enter Scale Value",type:"text",name:"value",value:e.value,onChange:e=>J(t,e)})})}),(0,r.jsx)("div",{className:"col-md-2 d-flex justify-content-center",children:M&&(0,r.jsx)("button",{className:"btn btn-danger",type:"button",onClick:()=>z(t),children:"Remove"})})]},t))),(0,r.jsx)("div",{className:"d-flex justify-content-end",children:(0,r.jsx)("button",{className:"btn btn-primary me-4",type:"button",onClick:O,children:"Add More"})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("textarea",{rows:4,className:"form-control col-12",placeholder:"Notes (Optional)",name:"desc",value:N,onChange:e=>w(e.target.value)})}),(0,r.jsx)("div",{className:"d-flex mt-2",children:(0,r.jsx)("div",{className:"w-auto",children:(0,r.jsx)(d.$,{dateAdapter:c.R,children:(0,r.jsx)(o.j,{components:["DateTimePicker"],children:(0,r.jsx)(m.K,{label:"Next Appointment Date",value:g,onChange:e=>{f(e)}})})})})}),(0,r.jsxs)("div",{className:"text-end",children:[(0,r.jsx)("button",{type:"submit",className:"btn btn-primary mt-4",style:{width:"10rem"},children:"Submit"}),(0,r.jsx)("button",{type:"submit",className:"btn btn-danger mt-4 ms-2",style:{width:"10rem"},onClick:()=>(i(!1),void p(!0)),children:"Close"})]})]}),(0,r.jsx)(h.N9,{})]})]})},x=e=>{let{patientSearch:t,getSearchByPatient:s}=e;const[n,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(""),[h,u]=(0,a.useState)("");return(0,r.jsx)("div",{children:null===t||void 0===t?void 0:t.map((e=>{const{name:t,crn:a,phone:x,age:v,sex:j,diagnosis:g,_id:f,desc:y,nextApointmentDate:b}=e,N=d===f,w=h===f,S=new Date(b).toLocaleString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(/\//g,"/");return(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{style:{marginTop:"2rem"},children:(0,r.jsx)("div",{className:"card",style:{width:"100%"},children:(0,r.jsxs)("div",{className:"card-body overflow-auto ",children:[(0,r.jsxs)("h5",{className:"card-title",children:[" CR No : ",a]}),(0,r.jsx)("h6",{className:"card-subtitle mt-2",children:(0,r.jsxs)("h5",{children:["Name : ",t]})}),(0,r.jsxs)("div",{style:{display:"flex",marginTop:"1rem"},children:[(0,r.jsxs)("span",{style:{display:"flex"},children:[(0,r.jsx)("h6",{children:"Phone No. \xa0"})," ",(0,r.jsx)("h6",{style:{fontWeight:"normal"},children:x})]}),(0,r.jsxs)("span",{style:{display:"flex",marginLeft:"2rem"},children:[(0,r.jsx)("h6",{children:"Age. \xa0"})," ",(0,r.jsx)("h6",{style:{fontWeight:"normal"},children:v})]}),(0,r.jsxs)("span",{style:{display:"flex",marginLeft:"2rem"},children:[(0,r.jsx)("h6",{children:" Sex. \xa0"})," ",(0,r.jsx)("h6",{style:{fontWeight:"normal"},children:j})]}),(0,r.jsxs)("span",{style:{display:"flex",marginLeft:"2rem"},children:[(0,r.jsx)("h6",{children:"Next Appointment Date. \xa0"})," ",(0,r.jsx)("h6",{style:{fontWeight:"normal"},children:b?S:"-"})]})]}),(0,r.jsxs)("div",{className:"text-end",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-success",onClick:()=>{return e=f,m((t=>t===e?"":e)),u(""),void c(!0);var e},children:"Show Diagnosis"}),(0,r.jsx)("button",{type:"button",className:"btn btn-warning",style:{marginLeft:"2rem"},onClick:()=>{return u(e=f),m(e),l(!0),void c(!1);var e},children:"Add New Diagnosis"})]}),N&&o&&(0,r.jsx)("div",{children:(0,r.jsx)(i,{diagnosis:g,desc:y})}),w&&n&&(0,r.jsx)("div",{children:(0,r.jsx)(p,{_id:f,getSearchByPatient:s,setIsAddNewDiagnosis:l,setIsDetailed:c})})]})})})},f)}))})};s(83910);var v=s(57528),j=s(98587),g=s(58168),f=s(58387),y=s(68606),b=s(83290),N=s(6803),w=s(72876),S=s(34535),C=s(57056),A=s(32400);function k(e){return(0,A.Ay)("MuiCircularProgress",e)}(0,C.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var D,P,R,I;const T=["className","color","disableShrink","size","style","thickness","value","variant"];let E,_,F,B;const M=44,L=(0,b.i7)(E||(E=D||(D=(0,v.A)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),W=(0,b.i7)(_||(_=P||(P=(0,v.A)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),H=(0,S.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t["color".concat((0,N.A)(s.color))]]}})((e=>{let{ownerState:t,theme:s}=e;return(0,g.A)({display:"inline-block"},"determinate"===t.variant&&{transition:s.transitions.create("transform")},"inherit"!==t.color&&{color:(s.vars||s).palette[t.color].main})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&(0,b.AH)(F||(F=R||(R=(0,v.A)(["\n      animation: "," 1.4s linear infinite;\n    "]))),L)})),J=(0,S.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),O=(0,S.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.circle,t["circle".concat((0,N.A)(s.variant))],s.disableShrink&&t.circleDisableShrink]}})((e=>{let{ownerState:t,theme:s}=e;return(0,g.A)({stroke:"currentColor"},"determinate"===t.variant&&{transition:s.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink&&(0,b.AH)(B||(B=I||(I=(0,v.A)(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),W)})),z=a.forwardRef((function(e,t){const s=(0,w.A)({props:e,name:"MuiCircularProgress"}),{className:a,color:n="primary",disableShrink:l=!1,size:i=40,style:o,thickness:c=3.6,value:d=0,variant:m="indeterminate"}=s,h=(0,j.A)(s,T),u=(0,g.A)({},s,{color:n,disableShrink:l,size:i,thickness:c,value:d,variant:m}),p=(e=>{const{classes:t,variant:s,color:a,disableShrink:n}=e,l={root:["root",s,"color".concat((0,N.A)(a))],svg:["svg"],circle:["circle","circle".concat((0,N.A)(s)),n&&"circleDisableShrink"]};return(0,y.A)(l,k,t)})(u),x={},v={},b={};if("determinate"===m){const e=2*Math.PI*((M-c)/2);x.strokeDasharray=e.toFixed(3),b["aria-valuenow"]=Math.round(d),x.strokeDashoffset="".concat(((100-d)/100*e).toFixed(3),"px"),v.transform="rotate(-90deg)"}return(0,r.jsx)(H,(0,g.A)({className:(0,f.A)(p.root,a),style:(0,g.A)({width:i,height:i},v,o),ownerState:u,ref:t,role:"progressbar"},b,h,{children:(0,r.jsx)(J,{className:p.svg,ownerState:u,viewBox:"".concat(22," ").concat(22," ").concat(M," ").concat(M),children:(0,r.jsx)(O,{className:p.circle,style:x,ownerState:u,cx:M,cy:M,r:(M-c)/2,fill:"none",strokeWidth:c})})}))}));var U=s(54984),V=s(58812),K=s(18698),$=s(45527);const q=["className","component"];var G=s(25430),X=s(88279),Y=s(13375);const Q=(0,C.A)("MuiBox",["root"]),Z=(0,X.A)(),ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:s,defaultClassName:n="MuiBox-root",generateClassName:l}=e,i=(0,U.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(V.A);return a.forwardRef((function(e,a){const o=(0,$.A)(s),c=(0,K.A)(e),{className:d,component:m="div"}=c,h=(0,j.A)(c,q);return(0,r.jsx)(i,(0,g.A)({as:m,ref:a,className:(0,f.A)(d,l?l(n):n),theme:t&&o[t]||o},h))}))}({themeId:Y.A,defaultTheme:Z,defaultClassName:Q.root,generateClassName:G.A.generate}),te=ee;function se(){return(0,r.jsx)(te,{style:{width:"100%",height:"20vh",lineHeight:"20vh",textAlign:"center",backgroundColor:"white",marginTop:"10px"},children:(0,r.jsx)(z,{})})}const ae=()=>(0,r.jsx)(te,{style:{width:"100%",height:"100%",lineHeight:"20vh",textAlign:"center",marginTop:"10px"},children:(0,r.jsx)(z,{})});var ne=s(73216);const le=()=>{var e,t;const s=(0,ne.zy)();console.log("location",Number(null===s||void 0===s||null===(e=s.state)||void 0===e?void 0:e.crn));let l="http://18.204.141.1:8090",i=localStorage.getItem("patientRecord"),p=JSON.parse(i);const[v,j]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[N,w]=a.useState(null),[S,C]=(0,a.useState)(!1),[A,k]=(0,a.useState)(""),[D,P]=(0,a.useState)([]),[R,I]=(0,a.useState)([]),[T,E]=(0,a.useState)([]),[_,F]=(0,a.useState)([]);let[B,M]=(0,a.useState)(!1);const[L,W]=(0,a.useState)(""),[H,J]=(0,a.useState)({name:"",age:"",sex:"male",phone:"",crn:"",diagnosis:[],desc:"",doctor_id:null===p||void 0===p?void 0:p._id});console.log("value date",N),(0,a.useEffect)((()=>{k(""),O()}),[]);const O=async()=>{try{var e,t;const s=await(0,n.J4)("".concat(l,"/api/problem/").concat(null===p||void 0===p||null===(e=p.department_id)||void 0===e?void 0:e._id)),a=null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.data[0];if(a){const e=a.problemName.filter((e=>"problem"===e.type)).map((e=>e.name)),t=a.problemName.filter((e=>"scale"===e.type)).map((e=>e.name)),s=a.problemName.filter((e=>"test"===e.type)).map((e=>{let{name:t,inputType:s}=e;return{name:t,inputType:s}}));E(s),F(t),I(e)}}catch(s){console.error("Error fetching problems:",s)}};console.log("problems",R);const z=async()=>{try{var e,t;let a=A||(null===s||void 0===s||null===(e=s.state)||void 0===e?void 0:e.crn);if(0===(null===a||void 0===a?void 0:a.length))return;f(!0);const r=await(0,n.J4)("".concat(l,"/api/patient/").concat(a));console.log("searchData",r),P(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.data),setTimeout((()=>{f(!1)}),3e3)}catch(a){console.log(a)}};(0,a.useEffect)((()=>{!0===v&&z()}),[v]);let[U,V]=(0,a.useState)(new Date);(0,a.useEffect)((()=>{var e,t;null!==s&&void 0!==s&&null!==(e=s.state)&&void 0!==e&&e.crn&&(k(null===s||void 0===s||null===(t=s.state)||void 0===t?void 0:t.crn),z())}),[s]);let[K,$]=(0,a.useState)(!1);const[q,G]=(0,a.useState)([{problem:"",test:"",testInput:"",scale:"",value:""}]),X=(e,t)=>{const{name:s,value:a}=t.target,n=[...q];n[e][s]=a,G(n)},Y=()=>{G([...q,{problem:"",test:"",testInput:"",scale:"",value:""}])},Q=e=>{const t=[...q];t.splice(e,1),G(t)};return(0,a.useEffect)((()=>{q.length>1?$(!0):$(!1)}),[Q,Y,X]),(0,a.useEffect)((()=>{console.log("Updated inputs:",q)}),[q]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[S||y?"":(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{fontWeight:"bolder"},children:"Search Patient"}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsx)("input",{style:{paddingLeft:"5px"},className:"form-control",placeholder:"CR no. or Phone no.",type:"text",name:"search",value:A,onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),z())},onChange:e=>k(e.target.value)}),(0,r.jsx)("button",{className:"btn btn-primary",style:{marginLeft:"1rem",borderRadius:"5px"},type:"button",onClick:z,children:"Search"}),null!==A&&void 0!==A&&A.length?(0,r.jsx)("button",{className:"btn btn-danger text-light",style:{marginLeft:"1rem",borderRadius:"5px"},type:"button",onClick:()=>{try{k(""),P([])}catch(e){console.log(e)}},children:"Clear"}):""]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{style:{marginLeft:"1rem",borderRadius:"5px"},type:"button",onClick:()=>C(!0),className:"btn btn-outline-dark",children:"Add a Patient"})})]})]}),null===D||void 0===D||!D.length||S||y?(0,r.jsx)("div",{children:S?(0,r.jsxs)(r.Fragment,{children:[B&&(0,r.jsx)(u.A,{loading:B}),(0,r.jsx)("div",{className:"content-to-be-blurred",children:(0,r.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("hr",{}),(0,r.jsx)("h4",{children:"Patient Details"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"col-sm-4 mt-2 patientNamediv",children:["Name ",(0,r.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,r.jsx)("div",{className:"col-sm-8",children:(0,r.jsx)("input",{type:"text",className:"form-control ",name:"name",value:H.name,onChange:e=>J({...H,name:e.target.value})})})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"col-sm-4 mt-2 patientNamediv",children:["Age ",(0,r.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,r.jsx)("div",{className:"col-sm-8",children:(0,r.jsx)("input",{type:"number",className:"form-control ",name:"age",value:H.age,onChange:e=>J({...H,age:e.target.value})})})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"col-sm-4 mt-2 patientNamediv",children:["Sex ",(0,r.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,r.jsx)("div",{className:"col-sm-8",children:(0,r.jsxs)("select",{className:"form-control ",name:"sex",value:H.sex,onChange:e=>J({...H,sex:e.target.value}),children:[(0,r.jsx)("option",{value:"male",children:"Male"}),(0,r.jsx)("option",{value:"female",children:"Female"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})})]})})]}),(0,r.jsxs)("div",{className:"row ",children:[(0,r.jsx)("div",{className:"col-md-4 mt-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"col-lg-4 patientNamediv",children:["Phone No ",(0,r.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,r.jsx)("div",{className:" col-lg-8 col-sm-8",children:(0,r.jsx)("input",{className:"form-control ",type:"text",name:"phone",value:H.phone,onChange:e=>{(/^\d*$/.test(e.target.value)||""===e.target.value)&&J({...H,phone:e.target.value})},required:!0})})]})}),(0,r.jsx)("div",{className:"col-md-4 mt-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"col-sm-4  patientNamediv",children:["CR No ",(0,r.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,r.jsx)("div",{className:"col-sm-8",children:(0,r.jsx)("input",{className:"form-control ",type:"test",name:"crn",value:H.crn,onChange:e=>J({...H,crn:e.target.value}),required:!0})})]})})]})]}),(0,r.jsx)("hr",{}),(0,r.jsx)("div",{style:{margin:"1rem auto 1rem 0"},children:(0,r.jsxs)("h4",{children:["Diagnosis: (",null===p||void 0===p||null===(t=p.department_id)||void 0===t?void 0:t.departmentName,")"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("form",{className:"mb-3",children:[q.map(((e,t)=>(0,r.jsxs)("div",{className:"row mt-1 mb-2",children:[(0,r.jsx)("div",{className:"col-md-2",children:(0,r.jsx)("label",{children:(0,r.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"problem",value:e.problem,onChange:e=>X(t,e),children:[(0,r.jsx)("option",{value:"",children:"Chief complaint"}),R.map(((e,t)=>(0,r.jsx)("option",{value:e,children:e},t)))]})})}),(0,r.jsx)("div",{className:"col-md-2",children:(0,r.jsx)("label",{children:(0,r.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"test",value:e.test,onChange:e=>X(t,e),children:[(0,r.jsx)("option",{value:"",children:"Select Test"}),T.map(((e,t)=>(0,r.jsx)("option",{value:e.name,children:e.name},t)))]})})}),""===e.test?"":(0,r.jsx)("div",{className:"col-md-2",children:T.map(((s,a)=>{if(s.name===e.test){if("text"===s.inputType)return(0,r.jsx)("label",{children:(0,r.jsx)("input",{className:"form-control",style:{width:"10rem"},placeholder:"Enter test Value",type:"text",name:"testInput",value:e.testInput,onChange:e=>X(t,e)})},a);if("file"===s.inputType)return(0,r.jsx)("label",{children:(0,r.jsx)("input",{className:"form-control",style:{width:"10rem"},type:"file",name:"testInput",onChange:e=>((e,t)=>{const{name:s,files:a}=t.target,n=[...q];n[e][s]=a[0],G(n),console.log("Guarv",q)})(t,e)})},a)}return null}))}),(0,r.jsx)("div",{className:"col-md-2",children:(0,r.jsx)("label",{children:(0,r.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"scale",value:e.scale,onChange:e=>X(t,e),children:[(0,r.jsx)("option",{value:"",children:"Select Scale"}),_.map(((e,t)=>(0,r.jsx)("option",{value:e,children:e},t)))]})})}),(0,r.jsx)("div",{className:"col-md-2",children:(0,r.jsx)("label",{children:(0,r.jsx)("input",{className:"form-control ",style:{width:"10rem",appearance:"auto"},placeholder:"Enter Scale Value",type:"text",name:"value",value:e.value,onChange:e=>X(t,e)})})}),(0,r.jsx)("div",{className:"col-md-2 d-flex justify-content-center",children:K&&(0,r.jsx)("button",{className:"btn btn-danger",type:"button",onClick:()=>Q(t),children:"Remove"})})]},t))),(0,r.jsx)("div",{className:"d-flex justify-content-end",children:(0,r.jsx)("button",{className:"btn btn-primary me-4",type:"button",onClick:Y,children:"Add More"})})]})}),(0,r.jsx)("div",{children:(0,r.jsx)("textarea",{rows:4,className:"form-control col-12",placeholder:"Notes (Optional)",name:"desc",value:L,onChange:e=>W(e.target.value)})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"d-flex mt-2",children:(0,r.jsx)("div",{className:"w-auto",children:(0,r.jsx)(d.$,{dateAdapter:c.R,children:(0,r.jsx)(o.j,{components:["DateTimePicker"],children:(0,r.jsx)(m.K,{label:"Next Appointment Date",value:N,onChange:e=>{w(e)}})})})})})}),(0,r.jsxs)("div",{className:"text-end m-4",children:[(0,r.jsx)("button",{className:"btn btn-info mt-3 mx-2 w-auto",onClick:async()=>{if(k(""),!H.name||!H.age||!H.sex||!H.phone||!H.crn)return h.oR.warning("Please fill all Patient details");if(1===q.length&&""===q[0].problem)return h.oR.warning("Please select at least one Chief complaint");for(const a of q){if(""!==a.test&&""===a.testInput)return void h.oR.warning("Please give input for selected test");if(""!==a.scale&&""===a.value)return void h.oR.warning("Please give input for selected scale");console.log("data",a)}M(!0);try{await Promise.all(q.map((async(e,t)=>{if("string"!==typeof e.testInput){const s=e.testInput,a=new FormData;a.append("file",s);const r=await(0,n.De)("".concat(l,"/api/user/uploadPatientReport"),a);r&&(q[t].testInput=null===r||void 0===r?void 0:r.fileName)}})))}catch(s){M(!1),console.error("Error submitting data:",s)}const e={...H,diagnosis:[{diagnosData:q,date:Date(),desc:L}],nextApointmentDate:N};try{var t;const s=await(0,n.Hl)("".concat(l,"/api/patient/create"),e);!0===s.success&&(h.oR.success("Patient Created Successfully",{autoClose:2e3}),b(!0),C(!1),setTimeout((()=>{j(!0),b(!1),W(""),w(null),G([{problem:"",test:"",testInput:"",scale:"",value:""}])}),2e3),J({name:"",age:"",sex:"male",phone:"",crn:"",diagnosis:[],desc:"",doctor_id:null===p||void 0===p?void 0:p._id})),"phone Already Exists"==s.message&&(h.oR.warning("phone Already Exists"),M(!1)),"Crn Already Exists"==s.message&&(h.oR.warning("Crn Already Exists"),M(!1)),console.log("data",s),k(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.crn)}catch(s){h.oR.warning("Something went wrong"),M(!1),console.error("Error submitting data:",s)}},children:"Submit"}),(0,r.jsx)("button",{className:"btn btn-info mt-3 w-auto",onClick:()=>C(!1),children:"Close"})]})]})})]}):(0,r.jsx)("div",{children:y?"":(0,r.jsx)("div",{style:{width:"100%",height:"20vh",lineHeight:"20vh",textAlign:"center",backgroundColor:"white",marginTop:"10px"},children:g?(0,r.jsx)(se,{}):"No Data"})})}):(0,r.jsx)(x,{patientSearch:D,setData:C,getSearchByPatient:z})]}),y?(0,r.jsx)(ae,{}):"",(0,r.jsx)(h.N9,{})]})}},62377:()=>{}}]);
//# sourceMappingURL=4701.4f0f2cfd.chunk.js.map