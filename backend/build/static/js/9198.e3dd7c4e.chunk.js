"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9198],{19198:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var n=a(65043),s=a(63043),l=a(44751),i=a(41339),o=a(52455),c=a(66921),r=a(58390),d=a(60446),m=a.n(d),h=a(88062),p=(a(52316),a(73216)),u=a(70579);const x=()=>{let e="http://18.204.141.1:8090",t=localStorage.getItem("patientRecord"),a=JSON.parse(t);const[d,x]=(0,n.useState)(""),[v,g]=(0,n.useState)([]),[j,f]=(0,n.useState)("");(0,n.useEffect)((()=>{(async()=>{try{var t,a,n;const l=await(0,s.J4)("".concat(e,"/api/patient/patientByDoctor"));console.log("dasRes",l),x(null===l||void 0===l||null===(t=l.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.length),g(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.data)}catch(l){console.error("Error fetching data:",l)}})()}),[]);const[y,b]=(0,n.useState)([]),[D,N]=(0,n.useState)([]),S=m()(),[w,A]=(0,n.useState)(S),[k,C]=(0,n.useState)(S),[I,_]=(0,n.useState)(!1),F=async t=>{try{var a;if(k.isBefore(w))return void alert("End date cannot be earlier than start date");const t=new Date(w),n=new Date(k),l=t.toISOString().split("T")[0]+"T00:00:00.000Z",i=n.toISOString().split("T")[0]+"T00:00:00.000Z";console.log(l,i);const o=await(0,s.J4)("".concat(e,"/api/patient/nextAppointmentDate?startDate=").concat(l,"&endDate=").concat(i));b(null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.data)}catch(n){console.log(n)}};(0,n.useEffect)((()=>{F()}),[I]);(0,n.useEffect)((()=>{(()=>{try{const e=new Date(w);console.log("today",e);const t=null===e||void 0===e?void 0:e.getFullYear(),a=null===e||void 0===e?void 0:e.getMonth(),n=null===e||void 0===e?void 0:e.getDate(),s=v.filter((e=>{const s=new Date(null===e||void 0===e?void 0:e.nextApointmentDate),l=null===s||void 0===s?void 0:s.getFullYear(),i=null===s||void 0===s?void 0:s.getMonth(),o=null===s||void 0===s?void 0:s.getDate();return t===l&&a===i&&n===o}));N(s)}catch(e){console.log(e)}})()}),[w]),console.log("dateValue",w);const[P,Y]=(0,n.useState)("checkbox"),T=(0,p.Zp)(),R=[{title:"CR no",dataIndex:"crn"},{title:"Phone no",dataIndex:"phone",render:e=>(0,u.jsx)("a",{children:e})},{title:"Name",dataIndex:"name",render:e=>(0,u.jsx)("a",{children:e})},{title:"Age",dataIndex:"age"},{title:"Sex",dataIndex:"sex"},{title:"Appointment",dataIndex:"nextApointmentDate",render:e=>new Date(e).toLocaleString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(/\//g,"/")},{title:"Action",render:e=>(0,u.jsx)("button",{className:"btn btn-primary",onClick:t=>T("/patientPage",{state:e}),children:"View"})}],E={onChange:(e,t)=>{console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t)},getCheckboxProps:e=>({disabled:"Disabled User"===e.name,name:e.name})};return console.log("appointmentDataList",D),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"mb-5 mt-2",style:{textAlign:"center"},children:(0,u.jsxs)("h2",{children:["Welcome, ",null===a||void 0===a?void 0:a.name," "]})}),(0,u.jsx)(i.A,{numberOfPatient:d,appointmentDataList:D,filteredAppointment:y}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-sm-2",children:(0,u.jsx)("div",{style:{fontFamily:"sans-serif",marginTop:"1rem"},children:(0,u.jsx)("h4",{children:"Appointments"})})}),(0,u.jsx)("div",{className:"col-sm-10 ",children:(0,u.jsxs)("div",{className:"row justify-content-center",children:[(0,u.jsxs)("div",{className:"col-sm-4",children:[" ",(0,u.jsx)("div",{className:"",children:(0,u.jsx)(r.$,{dateAdapter:c.R,children:(0,u.jsx)(o.j,{components:["DateTimePicker"],children:(0,u.jsx)(h.K,{label:"From",value:w,onChange:e=>{A(e)},inputFormat:"YYYY-MM-DD",ampm:!1,ampmInClock:!1,views:["year","month","day"]})})})})]}),(0,u.jsxs)("div",{className:"col-sm-4",children:[" ",(0,u.jsx)("div",{children:(0,u.jsx)(r.$,{dateAdapter:c.R,children:(0,u.jsx)(o.j,{components:["DateTimePicker"],children:(0,u.jsx)(h.K,{label:"To",value:k,onChange:e=>{C(e)},inputFormat:"YYYY-MM-DD",ampm:!1,ampmInClock:!1,views:["year","month","day"]})})})})]}),(0,u.jsxs)("div",{className:"col-sm-2 d-flex  mb-3",children:[(0,u.jsx)("button",{className:"btn btn-primary mt-3 me-2",onClick:F,children:"Search"}),(0,u.jsx)("button",{className:"btn btn-primary mt-3 ",onClick:()=>{A(S),C(S),_(!I)},children:"Reset"})]})]})})]}),(0,u.jsx)("div",{className:"mt-2 table-responsive",children:(0,u.jsx)(l.A,{rowSelection:{type:P,...E},columns:R,dataSource:y})})]})}},41339:(e,t,a)=>{a.d(t,{A:()=>o});a(65043);var n=a(93946),s=a(90504),l=(a(6145),a(73216)),i=a(70579);const o=e=>{let{numberOfPatient:t,appointmentDataList:a,filteredAppointment:o}=e;const c=(0,l.Zp)();return(0,i.jsxs)(n.sK,{children:[(0,i.jsx)(n.UF,{sm:6,lg:3,children:(0,i.jsx)(n.Uz,{className:"mb-4",color:"primary",value:(0,i.jsxs)(i.Fragment,{children:["Patient ",(0,i.jsxs)("div",{className:"fs-6 fw-normal",children:["Number of Patients : ",t]})]}),onClick:()=>c("/patientPage"),style:{cursor:"pointer"},chart:(0,i.jsx)(s.WE,{className:"mt-3 mx-3",style:{height:"70px"}})})}),(0,i.jsx)(n.UF,{sm:6,lg:3,children:(0,i.jsx)(n.Uz,{className:"mb-4",color:"primary",value:(0,i.jsxs)(i.Fragment,{children:["Appointments"," ",(0,i.jsxs)("div",{className:"fs-6 fw-normal",children:["Today Appointment : ",null===o||void 0===o?void 0:o.length]})]}),chart:(0,i.jsx)(s.WE,{className:"mt-3 mx-3",style:{height:"70px"}})})})]})}}}]);
//# sourceMappingURL=9198.e3dd7c4e.chunk.js.map