"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4349],{4349:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var l=s(65043),a=s(63043),n=(s(62377),s(77154)),i=s(70579);const o=e=>{let{diagnosis:t,desc:s}=e;const[a,o]=(0,l.useState)([]),[r,c]=(0,l.useState)({});(0,l.useEffect)((()=>{t&&Array.isArray(t)&&o([...t].reverse())}),[t]);const d=e=>!!/^\d{13}_/.test(e);return(0,i.jsx)("div",{style:{maxHeight:"300px",overflowY:"scroll",overflowX:"hidden",marginTop:"20px"},children:null===a||void 0===a?void 0:a.map(((e,t)=>{var s;const l=null===e||void 0===e?void 0:e.date,a=new Date(l).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(/\//g,"/");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{style:{margin:"1rem auto 1rem 1rem",overflow:"auto !important"},children:[(0,i.jsxs)("h5",{children:["Diagnose Date : ",a]}),(0,i.jsxs)("table",{className:"table",style:{width:"90%",border:"1px solid",fontFamily:"ui-rounded",borderRadius:"10px"},children:[(0,i.jsxs)("colgroup",{children:[(0,i.jsx)("col",{style:{width:"20%"}}),(0,i.jsx)("col",{style:{width:"20%"}}),(0,i.jsx)("col",{style:{width:"20%"}}),(0,i.jsx)("col",{style:{width:"20%"}}),(0,i.jsx)("col",{style:{width:"20%"}})]}),(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",style:{background:"#FBF295"},children:"Problems"}),(0,i.jsx)("th",{scope:"col",style:{background:"#FBF295"},children:"Test"}),(0,i.jsx)("th",{scope:"col",style:{background:"#FBF295"},children:"Test value"}),(0,i.jsx)("th",{scope:"col",style:{background:"#FBF295"},children:"Scale"}),(0,i.jsx)("th",{scope:"col",style:{background:"#FBF295"},children:"Scale value"})]})}),null===e||void 0===e||null===(s=e.diagnosData)||void 0===s?void 0:s.map(((e,t)=>{let{problem:s,scale:l,test:a,testInput:o,value:m}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("tbody",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{fontWeight:"bolder"},children:s}),(0,i.jsx)("td",{style:{fontWeight:"bolder"},children:""===a?"-":a}),(0,i.jsx)("td",{style:{fontWeight:"bolder"},children:""===o?"-":d(o)?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("button",{className:"btn btn-light",onClick:()=>(async(e,t)=>{c((e=>({...e,[t]:!0})));try{const t=await n.A.get("".concat("http://18.204.141.1:8090","/api/user/getPatientReport/").concat(e),{responseType:"blob"}),s=new Blob([t.data],{type:t.headers["content-type"]}),l=URL.createObjectURL(s);window.open(l)}catch(s){console.error("Error fetching image:",s)}finally{c((e=>({...e,[t]:!1})))}})(o,t),disabled:r[t],children:r[t]?"Please Wait...":"Show Report"})}):o}),(0,i.jsx)("td",{style:{fontWeight:"bolder"},children:""===l?"-":l}),(0,i.jsx)("td",{style:{fontWeight:"bolder"},children:""===m?"-":m})]})},t)})}))]}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{style:{margin:"1rem auto 1rem 1rem"},children:(0,i.jsxs)("div",{className:"row",style:{marginTop:"1rem"},children:[(0,i.jsx)("div",{className:"col-md-2 d-flex align-items-center",children:(0,i.jsx)("h5",{children:"Notes:"})}),(0,i.jsx)("div",{className:"col-md-10 d-flex align-items-center",children:(0,i.jsx)("div",{className:"card",style:{width:"87%",padding:"1rem 2rem"},children:(0,i.jsx)("p",{style:{margin:"0"},children:""===e.desc?"-":e.desc})})})]})})})]}),(0,i.jsx)("hr",{})]})},t)})}))})};var r=s(14182),c=s(66921),d=s(58390),m=s(98572),h=s(91036),u=(s(92342),s(84086));const p=e=>{var t;let{_id:s,getSearchByPatient:n,setIsAddNewDiagnosis:o,setIsDetailed:p}=e,x="http://18.204.141.1:8090",v=localStorage.getItem("patientRecord"),j=JSON.parse(v);const[g,y]=l.useState(null),[f,b]=(0,l.useState)({}),[N,w]=(0,l.useState)(""),[S,C]=(0,l.useState)({diagnosis:[],desc:""}),[D,A]=(0,l.useState)([]);let[R,P]=(0,l.useState)(!1);const[I,k]=(0,l.useState)([]),[E,_]=(0,l.useState)([]),[T,F]=(0,l.useState)([]),[L,W]=(0,l.useState)(!1);(0,l.useEffect)((()=>{B()}),[]);const B=async()=>{try{var e,t;const s=await(0,a.J4)("".concat(x,"/api/problem/").concat(null===j||void 0===j||null===(e=j.department_id)||void 0===e?void 0:e._id)),l=null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.data[0];if(l){const e=l.problemName.filter((e=>"problem"===e.type)).map((e=>e.name)),t=l.problemName.filter((e=>"scale"===e.type)).map((e=>e.name)),s=l.problemName.filter((e=>"test"===e.type)).map((e=>{let{name:t,inputType:s}=e;return{name:t,inputType:s}}));_(s),F(t),k(e)}}catch(s){console.error("Error fetching problems:",s)}};(0,l.useEffect)((()=>{f.desc&&C((e=>({...e,desc:f.desc})))}),[f]),(0,l.useEffect)((()=>{(async()=>{try{const e=await(0,a.J4)("".concat(x,"/api/patient/").concat(s));b(e.data.data)}catch(e){console.log(e)}})()}),[]);let[J,O]=(0,l.useState)(!1);const[U,H]=(0,l.useState)([{problem:"",test:"",testInput:"",scale:"",value:""}]),V=(e,t)=>{const{name:s,value:l}=t.target,a=[...U];a[e][s]=l,H(a)},K=()=>{H([...U,{problem:"",test:"",testInput:"",scale:"",value:""}])},M=e=>{const t=[...U];t.splice(e,1),H(t)};return(0,l.useEffect)((()=>{U.length>1?O(!0):O(!1)}),[M,K,V]),(0,i.jsxs)(i.Fragment,{children:[R&&(0,i.jsx)(u.A,{loading:R,message:"Uploading Files"}),L&&(0,i.jsx)(u.A,{message:"Adding Diagnosis"}),(0,i.jsxs)("div",{style:{margin:"1rem auto 1rem 1rem"},children:[(0,i.jsx)("div",{style:{margin:"1rem auto 1rem 0"},children:(0,i.jsxs)("h4",{children:["Diagnosis: (",null===j||void 0===j||null===(t=j.department_id)||void 0===t?void 0:t.departmentName,")"]})}),(0,i.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),1===U.length&&""===U[0].problem)return h.oR.warning("Please select at least one Chief complaint");for(const s of U){if(""!==(null===s||void 0===s?void 0:s.test)&&""===(null===s||void 0===s?void 0:s.testInput))return void h.oR.warning("Please give input for selected test");if(""!==(null===s||void 0===s?void 0:s.scale)&&""===(null===s||void 0===s?void 0:s.value))return void h.oR.warning("Please give input for selected scale");console.log("data",s)}P(!0);try{await Promise.all(U.map((async(e,t)=>{if("string"!==typeof e.testInput){const s=e.testInput,l=new FormData;l.append("file",s);const n=await(0,a.De)("".concat(x,"/api/user/uploadPatientReport"),l);n&&(U[t].testInput=null===n||void 0===n?void 0:n.fileName)}}))),P(!1)}catch(t){P(!1),console.error("Error submitting data:",t)}try{W(!0);const e={...S,diagnosis:[{diagnosData:U,date:Date(),desc:N}],nextApointmentDate:g};await(0,a.E8)("".concat(x,"/api/patient/update/").concat(s),e)&&(A([]),w(""),h.oR.success("Patient Updated Successfully",{autoClose:1e3}),setTimeout((()=>{o(!1),p(!0),H([{problem:"",test:"",testInput:"",scale:"",value:""}]),W(!1)}),2e3),n())}catch(t){console.log(t)}},children:[(0,i.jsxs)("form",{className:"mb-2",children:[null===U||void 0===U?void 0:U.map(((e,t)=>(0,i.jsxs)("div",{className:"row mt-1 mb-2",children:[(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("label",{children:(0,i.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"problem",value:e.problem,onChange:e=>V(t,e),children:[(0,i.jsx)("option",{value:"",children:"Chief complaint"}),null===I||void 0===I?void 0:I.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))]})})}),(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("label",{children:(0,i.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"test",value:e.test,onChange:e=>V(t,e),children:[(0,i.jsx)("option",{value:"",children:"Select Test"}),null===E||void 0===E?void 0:E.map(((e,t)=>(0,i.jsx)("option",{value:e.name,children:e.name},t)))]})})}),""===(null===e||void 0===e?void 0:e.test)?"":(0,i.jsx)("div",{className:"col-md-2",children:null===E||void 0===E?void 0:E.map(((s,l)=>{if(s.name===e.test){if("text"===(null===s||void 0===s?void 0:s.inputType))return(0,i.jsx)("label",{children:(0,i.jsx)("input",{className:"form-control",style:{width:"10rem"},placeholder:"Enter test Value",type:"text",name:"testInput",value:e.testInput,onChange:e=>V(t,e)})},l);if("file"===(null===s||void 0===s?void 0:s.inputType))return(0,i.jsx)("label",{children:(0,i.jsx)("input",{className:"form-control",style:{width:"10rem"},type:"file",name:"testInput",onChange:e=>((e,t)=>{const{name:s,files:l}=t.target,a=[...U];a[e][s]=l[0],H(a),console.log("Guarv",U)})(t,e)})},l)}return null}))}),(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("label",{children:(0,i.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"scale",value:e.scale,onChange:e=>V(t,e),children:[(0,i.jsx)("option",{value:"",children:"Select Scale"}),null===T||void 0===T?void 0:T.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))]})})}),(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("label",{children:(0,i.jsx)("input",{className:"form-control ",style:{width:"10rem",appearance:"auto"},placeholder:"Enter Scale Value",type:"text",name:"value",value:e.value,onChange:e=>V(t,e)})})}),(0,i.jsx)("div",{className:"col-md-2 d-flex justify-content-center",children:J&&(0,i.jsx)("button",{className:"btn btn-danger",type:"button",onClick:()=>M(t),children:"Remove"})})]},t))),(0,i.jsx)("div",{className:"d-flex justify-content-end",children:(0,i.jsx)("button",{className:"btn btn-primary me-4",type:"button",onClick:K,children:"Add More"})})]}),(0,i.jsx)("div",{children:(0,i.jsx)("textarea",{rows:4,className:"form-control col-12",placeholder:"Notes (Optional)",name:"desc",value:N,onChange:e=>w(e.target.value)})}),(0,i.jsx)("div",{className:"d-flex mt-2",children:(0,i.jsx)("div",{className:"w-auto",children:(0,i.jsx)(d.$,{dateAdapter:c.R,children:(0,i.jsx)(r.j,{components:["DateTimePicker"],children:(0,i.jsx)(m.K,{label:"Next Appointment Date",value:g,onChange:e=>{y(e)}})})})})}),(0,i.jsxs)("div",{className:"text-end",children:[(0,i.jsx)("button",{type:"submit",className:"btn btn-primary mt-4",style:{width:"10rem"},children:"Submit"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-danger mt-4 ms-2",style:{width:"10rem"},onClick:()=>(o(!1),void p(!0)),children:"Close"})]})]}),(0,i.jsx)(h.N9,{})]})]})},x=e=>{let{patientSearch:t,getSearchByPatient:s}=e;const[a,n]=(0,l.useState)(!1),[r,c]=(0,l.useState)(!1),[d,m]=(0,l.useState)(""),[h,u]=(0,l.useState)("");return(0,i.jsx)("div",{children:null===t||void 0===t?void 0:t.map((e=>{const{name:t,crn:l,phone:x,age:v,sex:j,diagnosis:g,_id:y,desc:f,nextApointmentDate:b}=e,N=d===y,w=h===y,S=new Date(b).toLocaleString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(/\//g,"/");return(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{style:{marginTop:"2rem"},children:(0,i.jsx)("div",{className:"card",style:{width:"100%"},children:(0,i.jsxs)("div",{className:"card-body overflow-auto ",children:[(0,i.jsxs)("h5",{className:"card-title",children:[" CR No : ",l]}),(0,i.jsx)("h6",{className:"card-subtitle mt-2",children:(0,i.jsxs)("h5",{children:["Name : ",t]})}),(0,i.jsxs)("div",{style:{display:"flex",marginTop:"1rem"},children:[(0,i.jsxs)("span",{style:{display:"flex"},children:[(0,i.jsx)("h6",{children:"Phone No. \xa0"})," ",(0,i.jsx)("h6",{style:{fontWeight:"normal"},children:x})]}),(0,i.jsxs)("span",{style:{display:"flex",marginLeft:"2rem"},children:[(0,i.jsx)("h6",{children:"Age. \xa0"})," ",(0,i.jsx)("h6",{style:{fontWeight:"normal"},children:v})]}),(0,i.jsxs)("span",{style:{display:"flex",marginLeft:"2rem"},children:[(0,i.jsx)("h6",{children:" Sex. \xa0"})," ",(0,i.jsx)("h6",{style:{fontWeight:"normal"},children:j})]}),(0,i.jsxs)("span",{style:{display:"flex",marginLeft:"2rem"},children:[(0,i.jsx)("h6",{children:"Next Appointment Date. \xa0"})," ",(0,i.jsx)("h6",{style:{fontWeight:"normal"},children:b?S:"-"})]})]}),(0,i.jsxs)("div",{className:"text-end",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-success",onClick:()=>{return e=y,m((t=>t===e?"":e)),u(""),void c(!0);var e},children:"Show Diagnosis"}),(0,i.jsx)("button",{type:"button",className:"btn btn-warning",style:{marginLeft:"2rem"},onClick:()=>{return u(e=y),m(e),n(!0),void c(!1);var e},children:"Add New Diagnosis"})]}),N&&r&&(0,i.jsx)("div",{children:(0,i.jsx)(o,{diagnosis:g,desc:f})}),w&&a&&(0,i.jsx)("div",{children:(0,i.jsx)(p,{_id:y,getSearchByPatient:s,setIsAddNewDiagnosis:n,setIsDetailed:c})})]})})})},y)}))})};s(83910);var v=s(63483),j=s(81637),g=s(96446);const y=()=>(0,i.jsx)(g.A,{style:{width:"100%",height:"100%",lineHeight:"20vh",textAlign:"center",marginTop:"10px"},children:(0,i.jsx)(j.A,{})});var f=s(73216);const b=()=>{var e,t;const s=(0,f.zy)();console.log("location",Number(null===s||void 0===s||null===(e=s.state)||void 0===e?void 0:e.crn));let n="http://18.204.141.1:8090",o=localStorage.getItem("patientRecord"),p=JSON.parse(o);const[j,g]=(0,l.useState)(!1),[b,N]=(0,l.useState)(!1),[w,S]=(0,l.useState)(!1),[C,D]=l.useState(null),[A,R]=(0,l.useState)(!1),[P,I]=(0,l.useState)(""),[k,E]=(0,l.useState)([]),[_,T]=(0,l.useState)([]),[F,L]=(0,l.useState)([]),[W,B]=(0,l.useState)([]);let[J,O]=(0,l.useState)(!1);const[U,H]=(0,l.useState)(""),[V,K]=(0,l.useState)({name:"",age:"",sex:"male",phone:"",crn:"",diagnosis:[],desc:"",doctor_id:null===p||void 0===p?void 0:p._id});console.log("value date",C),(0,l.useEffect)((()=>{I(""),M()}),[]);const M=async()=>{try{var e,t;const s=await(0,a.J4)("".concat(n,"/api/problem/").concat(null===p||void 0===p||null===(e=p.department_id)||void 0===e?void 0:e._id)),l=null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.data[0];if(l){const e=l.problemName.filter((e=>"problem"===e.type)).map((e=>e.name)),t=l.problemName.filter((e=>"scale"===e.type)).map((e=>e.name)),s=l.problemName.filter((e=>"test"===e.type)).map((e=>{let{name:t,inputType:s}=e;return{name:t,inputType:s}}));L(s),B(t),T(e)}}catch(s){console.error("Error fetching problems:",s)}};console.log("problems",_);const $=async()=>{try{var e,t;let l=P||(null===s||void 0===s||null===(e=s.state)||void 0===e?void 0:e.crn);if(0===(null===l||void 0===l?void 0:l.length))return;N(!0);const i=await(0,a.J4)("".concat(n,"/api/patient/").concat(l));console.log("searchData",i),E(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.data),setTimeout((()=>{N(!1)}),3e3)}catch(l){console.log(l)}};(0,l.useEffect)((()=>{!0===j&&$()}),[j]);let[q,G]=(0,l.useState)(new Date);(0,l.useEffect)((()=>{var e,t;null!==s&&void 0!==s&&null!==(e=s.state)&&void 0!==e&&e.crn&&(I(null===s||void 0===s||null===(t=s.state)||void 0===t?void 0:t.crn),$())}),[s]);let[z,X]=(0,l.useState)(!1);const[Y,Q]=(0,l.useState)([{problem:"",test:"",testInput:"",scale:"",value:""}]),Z=(e,t)=>{const{name:s,value:l}=t.target,a=[...Y];a[e][s]=l,Q(a)},ee=()=>{Q([...Y,{problem:"",test:"",testInput:"",scale:"",value:""}])},te=e=>{const t=[...Y];t.splice(e,1),Q(t)};return(0,l.useEffect)((()=>{Y.length>1?X(!0):X(!1)}),[te,ee,Z]),(0,l.useEffect)((()=>{console.log("Updated inputs:",Y)}),[Y]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[A||w?"":(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{style:{fontWeight:"bolder"},children:"Search Patient"}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)("input",{style:{paddingLeft:"5px"},className:"form-control",placeholder:"CR no. or Phone no.",type:"text",name:"search",value:P,onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),$())},onChange:e=>I(e.target.value)}),(0,i.jsx)("button",{className:"btn btn-primary",style:{marginLeft:"1rem",borderRadius:"5px"},type:"button",onClick:$,children:"Search"}),null!==P&&void 0!==P&&P.length?(0,i.jsx)("button",{className:"btn btn-danger text-light",style:{marginLeft:"1rem",borderRadius:"5px"},type:"button",onClick:()=>{try{I(""),E([])}catch(e){console.log(e)}},children:"Clear"}):""]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{style:{marginLeft:"1rem",borderRadius:"5px"},type:"button",onClick:()=>R(!0),className:"btn btn-outline-dark",children:"Add a Patient"})})]})]}),null===k||void 0===k||!k.length||A||w?(0,i.jsx)("div",{children:A?(0,i.jsxs)(i.Fragment,{children:[J&&(0,i.jsx)(u.A,{loading:J}),(0,i.jsx)("div",{className:"content-to-be-blurred",children:(0,i.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("hr",{}),(0,i.jsx)("h4",{children:"Patient Details"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"col-sm-4 mt-2 patientNamediv",children:["Name ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-8",children:(0,i.jsx)("input",{type:"text",className:"form-control ",name:"name",value:V.name,onChange:e=>K({...V,name:e.target.value})})})]})}),(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"col-sm-4 mt-2 patientNamediv",children:["Age ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-8",children:(0,i.jsx)("input",{type:"number",className:"form-control ",name:"age",value:V.age,onChange:e=>K({...V,age:e.target.value})})})]})}),(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"col-sm-4 mt-2 patientNamediv",children:["Sex ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-8",children:(0,i.jsxs)("select",{className:"form-control ",name:"sex",value:V.sex,onChange:e=>K({...V,sex:e.target.value}),children:[(0,i.jsx)("option",{value:"male",children:"Male"}),(0,i.jsx)("option",{value:"female",children:"Female"}),(0,i.jsx)("option",{value:"other",children:"Other"})]})})]})})]}),(0,i.jsxs)("div",{className:"row ",children:[(0,i.jsx)("div",{className:"col-md-4 mt-4",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"col-lg-4 patientNamediv",children:["Phone No ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("div",{className:" col-lg-8 col-sm-8",children:(0,i.jsx)("input",{className:"form-control ",type:"text",name:"phone",value:V.phone,onChange:e=>{(/^\d*$/.test(e.target.value)||""===e.target.value)&&K({...V,phone:e.target.value})},required:!0})})]})}),(0,i.jsx)("div",{className:"col-md-4 mt-4",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"col-sm-4  patientNamediv",children:["CR No ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("div",{className:"col-sm-8",children:(0,i.jsx)("input",{className:"form-control ",type:"test",name:"crn",value:V.crn,onChange:e=>K({...V,crn:e.target.value}),required:!0})})]})})]})]}),(0,i.jsx)("hr",{}),(0,i.jsx)("div",{style:{margin:"1rem auto 1rem 0"},children:(0,i.jsxs)("h4",{children:["Diagnosis: (",null===p||void 0===p||null===(t=p.department_id)||void 0===t?void 0:t.departmentName,")"]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("form",{className:"mb-3",children:[Y.map(((e,t)=>(0,i.jsxs)("div",{className:"row mt-1 mb-2",children:[(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("label",{children:(0,i.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"problem",value:e.problem,onChange:e=>Z(t,e),children:[(0,i.jsx)("option",{value:"",children:"Chief complaint"}),_.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))]})})}),(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("label",{children:(0,i.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"test",value:e.test,onChange:e=>Z(t,e),children:[(0,i.jsx)("option",{value:"",children:"Select Test"}),F.map(((e,t)=>(0,i.jsx)("option",{value:e.name,children:e.name},t)))]})})}),""===e.test?"":(0,i.jsx)("div",{className:"col-md-2",children:F.map(((s,l)=>{if(s.name===e.test){if("text"===s.inputType)return(0,i.jsx)("label",{children:(0,i.jsx)("input",{className:"form-control",style:{width:"10rem"},placeholder:"Enter test Value",type:"text",name:"testInput",value:e.testInput,onChange:e=>Z(t,e)})},l);if("file"===s.inputType)return(0,i.jsx)("label",{children:(0,i.jsx)("input",{className:"form-control",style:{width:"10rem"},type:"file",name:"testInput",onChange:e=>((e,t)=>{const{name:s,files:l}=t.target,a=[...Y];a[e][s]=l[0],Q(a),console.log("Guarv",Y)})(t,e)})},l)}return null}))}),(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("label",{children:(0,i.jsxs)("select",{className:"form-control ",style:{width:"10rem",appearance:"auto",height:"38px"},name:"scale",value:e.scale,onChange:e=>Z(t,e),children:[(0,i.jsx)("option",{value:"",children:"Select Scale"}),W.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))]})})}),(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("label",{children:(0,i.jsx)("input",{className:"form-control ",style:{width:"10rem",appearance:"auto"},placeholder:"Enter Scale Value",type:"text",name:"value",value:e.value,onChange:e=>Z(t,e)})})}),(0,i.jsx)("div",{className:"col-md-2 d-flex justify-content-center",children:z&&(0,i.jsx)("button",{className:"btn btn-danger",type:"button",onClick:()=>te(t),children:"Remove"})})]},t))),(0,i.jsx)("div",{className:"d-flex justify-content-end",children:(0,i.jsx)("button",{className:"btn btn-primary me-4",type:"button",onClick:ee,children:"Add More"})})]})}),(0,i.jsx)("div",{children:(0,i.jsx)("textarea",{rows:4,className:"form-control col-12",placeholder:"Notes (Optional)",name:"desc",value:U,onChange:e=>H(e.target.value)})})]}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"d-flex mt-2",children:(0,i.jsx)("div",{className:"w-auto",children:(0,i.jsx)(d.$,{dateAdapter:c.R,children:(0,i.jsx)(r.j,{components:["DateTimePicker"],children:(0,i.jsx)(m.K,{label:"Next Appointment Date",value:C,onChange:e=>{D(e)}})})})})})}),(0,i.jsxs)("div",{className:"text-end m-4",children:[(0,i.jsx)("button",{className:"btn btn-info mt-3 mx-2 w-auto",onClick:async()=>{if(I(""),!V.name||!V.age||!V.sex||!V.phone||!V.crn)return h.oR.warning("Please fill all Patient details");if(1===Y.length&&""===Y[0].problem)return h.oR.warning("Please select at least one Chief complaint");for(const l of Y){if(""!==l.test&&""===l.testInput)return void h.oR.warning("Please give input for selected test");if(""!==l.scale&&""===l.value)return void h.oR.warning("Please give input for selected scale");console.log("data",l)}O(!0);try{await Promise.all(Y.map((async(e,t)=>{if("string"!==typeof e.testInput){const s=e.testInput,l=new FormData;l.append("file",s);const i=await(0,a.De)("".concat(n,"/api/user/uploadPatientReport"),l);i&&(Y[t].testInput=null===i||void 0===i?void 0:i.fileName)}})))}catch(s){O(!1),console.error("Error submitting data:",s)}const e={...V,diagnosis:[{diagnosData:Y,date:Date(),desc:U}],nextApointmentDate:C};try{var t;const s=await(0,a.Hl)("".concat(n,"/api/patient/create"),e);!0===s.success&&(h.oR.success("Patient Created Successfully",{autoClose:2e3}),S(!0),R(!1),setTimeout((()=>{g(!0),S(!1),H(""),D(null),Q([{problem:"",test:"",testInput:"",scale:"",value:""}])}),2e3),K({name:"",age:"",sex:"male",phone:"",crn:"",diagnosis:[],desc:"",doctor_id:null===p||void 0===p?void 0:p._id})),"phone Already Exists"==s.message&&(h.oR.warning("phone Already Exists"),O(!1)),"Crn Already Exists"==s.message&&(h.oR.warning("Crn Already Exists"),O(!1)),console.log("data",s),I(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.crn)}catch(s){h.oR.warning("Something went wrong"),O(!1),console.error("Error submitting data:",s)}},children:"Submit"}),(0,i.jsx)("button",{className:"btn btn-info mt-3 w-auto",onClick:()=>R(!1),children:"Close"})]})]})})]}):(0,i.jsx)("div",{children:w?"":(0,i.jsx)("div",{style:{width:"100%",height:"20vh",lineHeight:"20vh",textAlign:"center",backgroundColor:"white",marginTop:"10px"},children:b?(0,i.jsx)(v.A,{}):"No Data"})})}):(0,i.jsx)(x,{patientSearch:k,setData:R,getSearchByPatient:$})]}),w?(0,i.jsx)(y,{}):"",(0,i.jsx)(h.N9,{})]})}},62377:()=>{}}]);
//# sourceMappingURL=4349.c938a85d.chunk.js.map